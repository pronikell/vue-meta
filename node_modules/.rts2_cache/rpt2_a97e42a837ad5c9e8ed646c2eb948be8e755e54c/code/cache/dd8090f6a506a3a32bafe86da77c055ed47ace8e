{"code":"import { isFunction } from '@vue/shared';\r\nimport { computed, getCurrentInstance } from 'vue';\r\nimport { useMeta } from './useApi';\r\nexport const defaultOptions = {\r\n    keyName: 'metaInfo'\r\n};\r\nexport const createMixin = options => ({\r\n    created() {\r\n        const instance = getCurrentInstance();\r\n        if (!instance?.type || !(options.keyName in instance.type)) {\r\n            return;\r\n        }\r\n        const metaInfo = instance.type[options.keyName];\r\n        if (isFunction(metaInfo)) {\r\n            const computedMetaInfo = computed(metaInfo.bind(this));\r\n            useMeta(computedMetaInfo);\r\n        }\r\n        else {\r\n            useMeta(metaInfo);\r\n        }\r\n    }\r\n});\r\nexport const install = (app, _options = {}) => {\r\n    const options = Object.assign({}, defaultOptions, _options);\r\n    app.mixin(createMixin(options));\r\n};\r\n//# sourceMappingURL=plugin.js.map","references":["/tmp/b/vue-meta/node_modules/@vue/shared/dist/shared.d.ts","/tmp/b/vue-meta/node_modules/vue/dist/vue.d.ts","/tmp/b/vue-meta/src/types/options.ts","/tmp/b/vue-meta/src/useApi.ts"],"map":"{\"version\":3,\"file\":\"plugin.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/plugin.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,aAAa,CAAA;AACxC,OAAO,EAA8B,QAAQ,EAAE,kBAAkB,EAAE,MAAM,KAAK,CAAA;AAE9E,OAAO,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AAMlC,MAAM,CAAC,MAAM,cAAc,GAAkB;IAC3C,OAAO,EAAE,UAAU;CACpB,CAAA;AAGD,MAAM,CAAC,MAAM,WAAW,GAAgB,OAAO,CAAC,EAAE,CAAC,CAAC;IAClD,OAAO;QACL,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;QACrC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;YAC1D,OAAM;SACP;QAED,MAAM,QAAQ,GAAI,QAAQ,CAAC,IAAY,CAAC,OAAO,CAAC,OAAO,CAA6B,CAAA;QACpF,IAAI,UAAU,CAAC,QAAQ,CAAC,EAAE;YACxB,MAAM,gBAAgB,GAAG,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;YACtD,OAAO,CAAC,gBAAgB,CAAC,CAAA;SAC1B;aAAM;YACL,OAAO,CAAC,QAAQ,CAAC,CAAA;SAClB;IACH,CAAC;CACF,CAAC,CAAA;AAEF,MAAM,CAAC,MAAM,OAAO,GAAG,CAAC,GAAQ,EAAE,WAAmC,EAAE,EAAE,EAAE;IACzE,MAAM,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,cAAc,EAAE,QAAQ,CAAC,CAAA;IAC3D,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAA;AACjC,CAAC,CAAA\"}","dtsmap":{"name":"/tmp/b/vue-meta/node_modules/.rts2_cache/placeholder/src/plugin.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"plugin.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/plugin.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,GAAG,EAAE,qBAAqB,EAAgC,MAAM,KAAK,CAAA;AAI9E,oBAAY,aAAa,GAAG;IAC1B,OAAO,EAAE,MAAM,CAAA;CAChB,CAAA;AAED,eAAO,MAAM,cAAc,EAAE,aAE5B,CAAA;AAED,aAAK,WAAW,GAAG,CAAC,OAAO,EAAE,aAAa,KAAK,qBAAqB,CAAA;AACpE,eAAO,MAAM,WAAW,EAAE,WAexB,CAAA;AAEF,eAAO,MAAM,OAAO,QAAS,GAAG,aAAY,QAAQ,aAAa,CAAC,SAGjE,CAAA\"}"},"dts":{"name":"/tmp/b/vue-meta/node_modules/.rts2_cache/placeholder/src/plugin.d.ts","writeByteOrderMark":false,"text":"import { App, ComponentOptionsMixin } from 'vue';\r\nexport declare type PluginOptions = {\r\n    keyName: string;\r\n};\r\nexport declare const defaultOptions: PluginOptions;\r\ndeclare type CreateMixin = (options: PluginOptions) => ComponentOptionsMixin;\r\nexport declare const createMixin: CreateMixin;\r\nexport declare const install: (app: App, _options?: Partial<PluginOptions>) => void;\r\nexport {};\r\n//# sourceMappingURL=plugin.d.ts.map"}}
