{"code":"import { IS_PROXY, PROXY_SOURCES, PROXY_TARGET, RESOLVE_CONTEXT } from './constants';\r\nimport { createProxy } from './proxy';\r\nimport { recompute } from './recompute';\r\nexport const createMergedObject = (resolve, active) => {\r\n    const sources = [];\r\n    const context = {\r\n        active,\r\n        resolve,\r\n        sources\r\n    };\r\n    const compute = () => recompute(context);\r\n    return {\r\n        context,\r\n        compute,\r\n        addSource: (source, resolveContext, recompute = false) => {\r\n            const proxy = createProxy(context, source, resolveContext || {});\r\n            if (recompute) {\r\n                compute();\r\n            }\r\n            return proxy;\r\n        },\r\n        delSource: (sourceOrProxy, recompute = true) => {\r\n            const index = sources.findIndex(source => source === sourceOrProxy || source[PROXY_TARGET] === sourceOrProxy);\r\n            if (index > -1) {\r\n                sources.splice(index, 1);\r\n                if (recompute) {\r\n                    compute();\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n};\r\n//# sourceMappingURL=index.js.map","references":["/tmp/b/vue-meta/src/object-merge/constants.ts","/tmp/b/vue-meta/src/object-merge/proxy.ts","/tmp/b/vue-meta/src/object-merge/recompute.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/object-merge/index.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,YAAY,EAAE,eAAe,EAAE,MAAM,aAAa,CAAA;AACpF,OAAO,EAAE,WAAW,EAAE,MAAM,SAAS,CAAA;AACrC,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAA;AA2CvC,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAAmB,OAAyB,EAAE,MAAS,EAA0B,EAAE;IACnH,MAAM,OAAO,GAAqB,EAAE,CAAA;IAEpC,MAAM,OAAO,GAAoB;QAC/B,MAAM;QACN,OAAO;QACP,OAAO;KACR,CAAA;IAED,MAAM,OAAO,GAAe,GAAG,EAAE,CAAC,SAAS,CAAI,OAAO,CAAC,CAAA;IAEvD,OAAO;QACL,OAAO;QACP,OAAO;QACP,SAAS,EAAE,CAAC,MAAM,EAAE,cAAc,EAAE,SAAS,GAAG,KAAK,EAAE,EAAE;YACvD,MAAM,KAAK,GAAG,WAAW,CAAI,OAAO,EAAE,MAAM,EAAE,cAAc,IAAI,EAAE,CAAC,CAAA;YAEnE,IAAI,SAAS,EAAE;gBACb,OAAO,EAAE,CAAA;aACV;YAED,OAAO,KAAK,CAAA;QACd,CAAC;QACD,SAAS,EAAE,CAAC,aAAa,EAAE,SAAS,GAAG,IAAI,EAAE,EAAE;YAC7C,MAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,KAAK,aAAa,IAAI,MAAM,CAAC,YAAY,CAAC,KAAK,aAAa,CAAC,CAAA;YAE7G,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;gBACd,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;gBAExB,IAAI,SAAS,EAAE;oBACb,OAAO,EAAE,CAAA;iBACV;gBAED,OAAO,IAAI,CAAA;aACZ;YAED,OAAO,KAAK,CAAA;QACd,CAAC;KACF,CAAA;AACH,CAAC,CAAA\"}","dtsmap":{"name":"/tmp/b/vue-meta/node_modules/.rts2_cache/placeholder/src/object-merge/index.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"index.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/object-merge/index.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,YAAY,EAAE,eAAe,EAAE,MAAM,aAAa,CAAA;AAIpF,MAAM,WAAW,cAAc;CAAG;AAElC,oBAAY,WAAW,CAAC,CAAC,SAAS,MAAM,IAAI;KAAG,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;CAAE,GAAG;IACrE,CAAC,QAAQ,CAAC,EAAE,OAAO,CAAA;IACnB,CAAC,aAAa,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,CAAA;IACjC,CAAC,YAAY,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAA;IAC9B,CAAC,eAAe,CAAC,EAAE,cAAc,CAAA;CAClC,CAAA;AAGD,oBAAY,iBAAiB,GAAG,OAAO,GAAG,MAAM,GAAG,MAAM,GAAG,YAAY,GAAG,GAAG,CAAA;AAE9E,oBAAY,YAAY,GAAG;IACzB,CAAC,GAAG,EAAE,MAAM,GAAG,iBAAiB,CAAA;CACjC,CAAA;AAED,oBAAY,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,CAAA;AAExC,MAAM,WAAW,aAAa,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,cAAc;IACxD,CACE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC,EACjB,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,EAClB,MAAM,EAAE,iBAAiB,EACzB,GAAG,EAAE,MAAM,GAAG,MAAM,GAAG,MAAM,EAC7B,YAAY,EAAE,YAAY,GACzB,iBAAiB,CAAA;CACrB;AAED,oBAAY,YAAY,CAAC,CAAC,IAAI;IAC5B,OAAO,EAAE,aAAa,CAAA;IACtB,MAAM,EAAE,YAAY,CAAA;IACpB,OAAO,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,CAAA;CAC1B,CAAA;AAED,oBAAY,mBAAmB,CAAC,CAAC,IAAI;IACnC,OAAO,EAAE,YAAY,CAAC,CAAC,CAAC,CAAA;IACxB,OAAO,EAAE,MAAM,IAAI,CAAA;IACnB,SAAS,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,cAAc,CAAC,EAAE,cAAc,EAAE,SAAS,CAAC,EAAE,OAAO,KAAK,GAAG,CAAA;IACnF,SAAS,EAAE,CAAC,aAAa,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,OAAO,KAAK,OAAO,CAAA;CAC/E,CAAA;AAED,eAAO,MAAM,kBAAkB,oGAuC9B,CAAA\"}"},"dts":{"name":"/tmp/b/vue-meta/node_modules/.rts2_cache/placeholder/src/object-merge/index.d.ts","writeByteOrderMark":false,"text":"import { IS_PROXY, PROXY_SOURCES, PROXY_TARGET, RESOLVE_CONTEXT } from './constants';\r\nexport interface ResolveContext {\r\n}\r\nexport declare type MergeSource<T extends Object> = {\r\n    [K in keyof T]: T[K];\r\n} & {\r\n    [IS_PROXY]: boolean;\r\n    [PROXY_SOURCES]: MergeSource<T>[];\r\n    [PROXY_TARGET]: MergeSource<T>;\r\n    [RESOLVE_CONTEXT]: ResolveContext;\r\n};\r\nexport declare type MergedObjectValue = boolean | number | string | MergedObject | any;\r\nexport declare type MergedObject = {\r\n    [key: string]: MergedObjectValue;\r\n};\r\nexport declare type PathSegments = Array<string>;\r\nexport interface ResolveMethod<T = any, U = ResolveContext> {\r\n    (options: Array<T>, contexts: Array<U>, active: MergedObjectValue, key: string | number | symbol, pathSegments: PathSegments): MergedObjectValue;\r\n}\r\nexport declare type MergeContext<T> = {\r\n    resolve: ResolveMethod;\r\n    active: MergedObject;\r\n    sources: MergeSource<T>[];\r\n};\r\nexport declare type MergedObjectBuilder<T> = {\r\n    context: MergeContext<T>;\r\n    compute: () => void;\r\n    addSource: (source: T, resolveContext?: ResolveContext, recompute?: Boolean) => any;\r\n    delSource: (sourceOrProxy: T | MergeSource<T>, recompute?: boolean) => boolean;\r\n};\r\nexport declare const createMergedObject: <T extends Object>(resolve: ResolveMethod<T, ResolveContext>, active: T) => MergedObjectBuilder<T>;\r\n//# sourceMappingURL=index.d.ts.map"}}
